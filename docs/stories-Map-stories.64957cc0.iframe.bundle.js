"use strict";(self.webpackChunkmapc_design_system=self.webpackChunkmapc_design_system||[]).push([[770],{"./src/stories/Map.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},MAPCLayer:function(){return MAPCLayer},MapWithNavigation:function(){return MapWithNavigation},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return Map_stories}});var _templateObject,slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),taggedTemplateLiteral=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),mapbox_gl=__webpack_require__("./node_modules/mapbox-gl/dist/mapbox-gl.js"),MapContext=react.createContext(null),Map=function Map(_ref){var container=_ref.container,_ref$style=_ref.style,style=void 0===_ref$style?"mapbox://styles/mapbox/streets-v11":_ref$style,accessToken=_ref.accessToken,_ref$width=_ref.width,width=void 0===_ref$width?"700px":_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?"500px":_ref$height,_ref$center=_ref.center,center=void 0===_ref$center?[-70.944,42.37]:_ref$center,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?8.4:_ref$zoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?8:_ref$minZoom,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?16:_ref$maxZoom,onClick=_ref.onClick,children=_ref.children,mapRef=react.useRef(null),_React$useState=react.useState(null),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),map=_React$useState2[0],setMap=_React$useState2[1];return react.useEffect((function(){if(!map){var mapObj=new mapbox_gl.Map({container:container,style:style,accessToken:accessToken,zoom:zoom,center:center,maxZoom:maxZoom,minZoom:minZoom});setMap(mapObj)}return function(){map&&(null==map||map.remove(),setMap(null))}}),[map,minZoom,maxZoom,center,style,accessToken,zoom,container]),react.useEffect((function(){map&&onClick&&map.on("click",(function(e){return e.features=map.queryRenderedFeatures([e.point.x,e.point.y]),onClick(e)}))}),[map,onClick]),(0,emotion_react_browser_esm.tZ)(MapContext.Provider,{value:map},(0,emotion_react_browser_esm.tZ)("div",{ref:mapRef,id:container,css:(0,emotion_react_browser_esm.iv)(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(["\n          height: ",";\n          width: ",";\n        "])),height,width)},children))};try{Map.displayName="Map",Map.__docgenInfo={description:"",displayName:"Map",props:{container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"string"}},style:{defaultValue:{value:"mapbox://styles/mapbox/streets-v11"},description:"",name:"style",required:!1,type:{name:"string"}},accessToken:{defaultValue:null,description:"",name:"accessToken",required:!0,type:{name:"string"}},width:{defaultValue:{value:"700px"},description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:{value:"500px"},description:"",name:"height",required:!1,type:{name:"string"}},center:{defaultValue:{value:"[-70.944, 42.37]"},description:"",name:"center",required:!1,type:{name:"[number, number]"}},zoom:{defaultValue:{value:"8.4"},description:"",name:"zoom",required:!1,type:{name:"number"}},minZoom:{defaultValue:{value:"8"},description:"",name:"minZoom",required:!1,type:{name:"number"}},maxZoom:{defaultValue:{value:"16"},description:"",name:"maxZoom",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e: MapMouseEvent & { features?: MapboxGeoJSONFeature[]; } & EventData) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/maps/Map.tsx#Map"]={docgenInfo:Map.__docgenInfo,name:"Map",path:"src/components/maps/Map.tsx#Map"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),NavigationControl=function NavigationControl(_ref){var _ref$position=_ref.position,position=void 0===_ref$position?"bottom-right":_ref$position,map=react.useContext(MapContext);return react.useEffect((function(){var navigation=new mapbox_gl.NavigationControl;return null!=map&&map.hasControl(navigation)||null==map||map.addControl(navigation,position),function(){null!=map&&map.hasControl(navigation)&&map.removeControl(navigation)}}),[map,position]),(0,jsx_runtime.jsx)(react.Fragment,{})};try{NavigationControl.displayName="NavigationControl",NavigationControl.__docgenInfo={description:"",displayName:"NavigationControl",props:{position:{defaultValue:{value:"bottom-right"},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"bottom-right"'},{value:'"bottom-left"'},{value:'"top-right"'},{value:'"top-left"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/maps/NavigationControl.tsx#NavigationControl"]={docgenInfo:NavigationControl.__docgenInfo,name:"NavigationControl",path:"src/components/maps/NavigationControl.tsx#NavigationControl"})}catch(__react_docgen_typescript_loader_error){}var SourceContext=react.createContext("");var Source=function Source(_ref){var sourceId=_ref.sourceId,url=_ref.url,children=_ref.children,map=react.useContext(MapContext);return react.useEffect((function(){return null!=map&&map.loaded()?null==map||map.addSource(sourceId,{type:"vector",url:"mapbox://".concat(url)}):null==map||map.on("load",(function(e){null==map||map.addSource(sourceId,{type:"vector",url:"mapbox://".concat(url)})})),function(){null!=map&&map.isStyleLoaded()&&null!=map&&map.getSource(sourceId)&&(!function removeLayersOnSource(map,source){var _map$getStyle$layers;map&&(null===(_map$getStyle$layers=map.getStyle().layers)||void 0===_map$getStyle$layers||_map$getStyle$layers.forEach((function(layer){layer.source===source&&(null==map||map.removeLayer(layer.id))})))}(map,sourceId),null==map||map.removeSource(sourceId),null==map||map.off("load",(function(e){null==map||map.addSource(sourceId,{type:"vector",url:"mapbox://".concat(url)})})))}}),[map,sourceId,url]),(0,jsx_runtime.jsx)(SourceContext.Provider,{value:sourceId,children:children})};try{Source.displayName="Source",Source.__docgenInfo={description:"",displayName:"Source",props:{sourceId:{defaultValue:null,description:"",name:"sourceId",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/maps/Source.tsx#Source"]={docgenInfo:Source.__docgenInfo,name:"Source",path:"src/components/maps/Source.tsx#Source"})}catch(__react_docgen_typescript_loader_error){}var Layer=function Layer(_ref){var layerId=_ref.layerId,type=_ref.type,sourceLayer=_ref.sourceLayer,_ref$paint=_ref.paint,paint=void 0===_ref$paint?{}:_ref$paint,_ref$layout=_ref.layout,layout=void 0===_ref$layout?{}:_ref$layout,map=react.useContext(MapContext),source=react.useContext(SourceContext);return react.useEffect((function(){null==map||map.on("styledata",(function(e){null!=map&&map.getLayer(layerId)||null==map||!map.getSource(source)||null==map||map.addLayer({id:layerId,type:type,source:source,"source-layer":sourceLayer,paint:paint,layout:layout})}))}),[layerId,map,paint,source,sourceLayer,type,layout]),(0,jsx_runtime.jsx)(react.Fragment,{})};try{Layer.displayName="Layer",Layer.__docgenInfo={description:"",displayName:"Layer",props:{layerId:{defaultValue:null,description:"",name:"layerId",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"fill"'},{value:'"line"'}]}},sourceLayer:{defaultValue:null,description:"",name:"sourceLayer",required:!1,type:{name:"string"}},paint:{defaultValue:{value:"{}"},description:"",name:"paint",required:!1,type:{name:"{}"}},layout:{defaultValue:{value:"{}"},description:"",name:"layout",required:!1,type:{name:"{}"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/maps/Layer.tsx#Layer"]={docgenInfo:Layer.__docgenInfo,name:"Layer",path:"src/components/maps/Layer.tsx#Layer"})}catch(__react_docgen_typescript_loader_error){}var MunicipalitiesMAPC=function MunicipalitiesMAPC(_ref){var type=_ref.type,layerId=_ref.layerId,paint=_ref.paint,data=_ref.data,colorScale=_ref.colorScale,choroplethFunc=_ref.choroplethFunc,matchOn=_ref.matchOn,mapColumn=_ref.mapColumn,_React$useState=react.useState([]),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),choropleth=_React$useState2[0],setChoropleth=_React$useState2[1];return react.useEffect((function(){if(data){var choroplethTemp=["match",["get","municipal"]];data.forEach((function(row){choroplethTemp.push(row[matchOn],row[mapColumn]?choroplethFunc(colorScale,row[mapColumn]):"gray")})),choroplethTemp.push("gray"),setChoropleth(choroplethTemp)}}),[choroplethFunc,colorScale,data,mapColumn,matchOn]),(0,jsx_runtime.jsx)(Source,{sourceId:"MAPC Municipalities",url:"ihill.763lks2o",children:(0,jsx_runtime.jsx)(Layer,{type:type,paint:(0,objectSpread2.Z)((0,objectSpread2.Z)({},paint),{},{"fill-color":choropleth}),sourceLayer:"MAPC_borders-0im3ea",layerId:layerId})})};try{MunicipalitiesMAPC.displayName="MunicipalitiesMAPC",MunicipalitiesMAPC.__docgenInfo={description:"",displayName:"MunicipalitiesMAPC",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"{}[]"}},matchOn:{defaultValue:null,description:"",name:"matchOn",required:!0,type:{name:"string"}},mapColumn:{defaultValue:null,description:"",name:"mapColumn",required:!0,type:{name:"string"}},colorScale:{defaultValue:null,description:"",name:"colorScale",required:!0,type:{name:"string[]"}},choroplethFunc:{defaultValue:null,description:"",name:"choroplethFunc",required:!0,type:{name:"(colorScale: string[], value: string | number) => string"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"fill"'},{value:'"line"'}]}},sourceLayer:{defaultValue:null,description:"",name:"sourceLayer",required:!1,type:{name:"string"}},paint:{defaultValue:null,description:"",name:"paint",required:!1,type:{name:"{}"}},layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"{}"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/maps/MunicipalitiesMAPC.tsx#MunicipalitiesMAPC"]={docgenInfo:MunicipalitiesMAPC.__docgenInfo,name:"MunicipalitiesMAPC",path:"src/components/maps/MunicipalitiesMAPC.tsx#MunicipalitiesMAPC"})}catch(__react_docgen_typescript_loader_error){}var MapLegend_templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,Tooltip=function Tooltip(_ref){var onLayer=_ref.onLayer,children=_ref.children,map=react.useContext(MapContext),div=document.createElement("div");return react.useEffect((function(){onLayer?null==map||map.on("click",onLayer,(function(e){(new mapbox_gl.Popup).setLngLat(e.lngLat).setDOMContent(div).addTo(map)})):null==map||map.on("click",(function(e){(new mapbox_gl.Popup).setLngLat(e.lngLat).setDOMContent(div).addTo(map)}))}),[map,children,div,onLayer]),(0,jsx_runtime.jsx)("div",{})};try{Tooltip.displayName="Tooltip",Tooltip.__docgenInfo={description:"",displayName:"Tooltip",props:{onLayer:{defaultValue:null,description:"",name:"onLayer",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/maps/Tooltip.tsx#Tooltip"]={docgenInfo:Tooltip.__docgenInfo,name:"Tooltip",path:"src/components/maps/Tooltip.tsx#Tooltip"})}catch(__react_docgen_typescript_loader_error){}var legendWrapperStyle=(0,emotion_react_browser_esm.iv)(MapLegend_templateObject||(MapLegend_templateObject=(0,taggedTemplateLiteral.Z)(["\n  background-color: rgba(255,255,255,0.8);\n  max-width: 168px;\n  min-height: 20px;\n  padding: 5px 15px;\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  width: 168px;\n  z-index: 10;\n"]))),legendListStyle=(0,emotion_react_browser_esm.iv)(_templateObject2||(_templateObject2=(0,taggedTemplateLiteral.Z)(["\n  padding: 0;\n  margin: 0;\n  list-style: none;\n"]))),legendEntryStyle=(0,emotion_react_browser_esm.iv)(_templateObject3||(_templateObject3=(0,taggedTemplateLiteral.Z)(["\n  align-items: flex-start;\n  color: #1f4e46;\n  font-family: 'Montserrat', sans-serif;\n  font-size: .75rem;\n  font-weight: 300;\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 10px;\n"]))),legendTitleStyle=(0,emotion_react_browser_esm.iv)(_templateObject4||(_templateObject4=(0,taggedTemplateLiteral.Z)(["\n  color: #1f4e46;\n  font-family: 'Montserrat', sans-serif;\n  font-size: .75rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n"])));var MapLegend=function MapLegend(_ref){var legendEntries=_ref.legendEntries,colorScale=_ref.colorScale,title=_ref.title,children=_ref.children,_React$useState=react.useState(!0),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),isExpanded=_React$useState2[0],setExpansion=_React$useState2[1];return(0,emotion_react_browser_esm.tZ)("div",{css:legendWrapperStyle},isExpanded?(0,emotion_react_browser_esm.tZ)(react.Fragment,null,(0,emotion_react_browser_esm.tZ)("span",{css:legendTitleStyle},title),(0,emotion_react_browser_esm.tZ)("ul",{css:legendListStyle},function setLegend(legendEntries,colorScale){return legendEntries.map((function(entry,i){return(0,emotion_react_browser_esm.tZ)("li",{key:entry,css:legendEntryStyle},(0,emotion_react_browser_esm.tZ)("svg",{width:"21",height:"20",css:(0,emotion_react_browser_esm.iv)(_templateObject5||(_templateObject5=(0,taggedTemplateLiteral.Z)(["margin-right: 4px;"])))},(0,emotion_react_browser_esm.tZ)("rect",{x:"2",y:"2",width:"16",height:"16",fill:colorScale[i],stroke:"black"})),(0,emotion_react_browser_esm.tZ)("span",{className:"map-legend__entry"},entry))}))}(legendEntries,colorScale)),children):(0,emotion_react_browser_esm.tZ)("span",{css:legendTitleStyle},"Expand Legend"),(0,emotion_react_browser_esm.tZ)("button",{type:"button",css:(0,emotion_react_browser_esm.iv)(_templateObject6||(_templateObject6=(0,taggedTemplateLiteral.Z)(["float: right; margin-left: 16px;"]))),onClick:function onClick(){return setExpansion(!isExpanded)}},isExpanded?"-":"+"))};try{MapLegend.displayName="MapLegend",MapLegend.__docgenInfo={description:"",displayName:"MapLegend",props:{colorScale:{defaultValue:null,description:"",name:"colorScale",required:!0,type:{name:"string[]"}},legendEntries:{defaultValue:null,description:"",name:"legendEntries",required:!0,type:{name:"string[]"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/maps/MapLegend.tsx#MapLegend"]={docgenInfo:MapLegend.__docgenInfo,name:"MapLegend",path:"src/components/maps/MapLegend.tsx#MapLegend"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2,_Default$parameters2$,_MapWithNavigation$pa,_MapWithNavigation$pa2,_MapWithNavigation$pa3,_MAPCLayer$parameters,_MAPCLayer$parameters2,_MAPCLayer$parameters3,data=[{muni_id:"2",muni_upper:"ACTON",municipal:"Acton",mapc:"1","WW type":"Some sewer","WW provider":"","DW type":"Public Water Supply",sewer_flag:"2",Data_flag:"1"},{muni_id:"10",muni_upper:"ARLINGTON",municipal:"Arlington",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"14",muni_upper:"ASHLAND",municipal:"Ashland",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"23",muni_upper:"BEDFORD",municipal:"Bedford",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"25",muni_upper:"BELLINGHAM",municipal:"Bellingham",mapc:"1","WW type":"Some Sewer","WW provider":"Other","DW type":"Public Water Supply",sewer_flag:"2",Data_flag:"1"},{muni_id:"26",muni_upper:"BELMONT",municipal:"Belmont",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"30",muni_upper:"BEVERLY",municipal:"Beverly",mapc:"1","WW type":"Sewered","WW provider":"?","DW type":"Surface Water",sewer_flag:"1",Data_flag:"0"},{muni_id:"34",muni_upper:"BOLTON",municipal:"Bolton",mapc:"1","WW type":"Sewered (municipal buildings), Septic tanks (other)","WW provider":"Town of Bolton","DW type":"Unknown",sewer_flag:"0",Data_flag:"0"},{muni_id:"35",muni_upper:"BOSTON",municipal:"Boston",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"37",muni_upper:"BOXBOROUGH",municipal:"Boxborough",mapc:"1","WW type":"Unsewered","WW provider":"Septic tanks","DW type":"Groundwater",sewer_flag:"0",Data_flag:""},{muni_id:"40",muni_upper:"BRAINTREE",municipal:"Braintree",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Unknown",sewer_flag:"1",Data_flag:"1"},{muni_id:"46",muni_upper:"BROOKLINE",municipal:"Brookline",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"48",muni_upper:"BURLINGTON",municipal:"Burlington",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"49",muni_upper:"CAMBRIDGE",municipal:"Cambridge",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"50",muni_upper:"CANTON",municipal:"Canton",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"51",muni_upper:"CARLISLE",municipal:"Carlisle",mapc:"1","WW type":"Septic Systems","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:""},{muni_id:"57",muni_upper:"CHELSEA",municipal:"Chelsea",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"65",muni_upper:"COHASSET",municipal:"Cohasset",mapc:"1","WW type":"Some Sewer","WW provider":"North Cohasset Sewer District, Central Cohasset Sewer District/mid/north coastal cohasset, Municipal Sewer Areas. Aquarion runs one WWTP; also a 1996 agreement that Hull will treat some of Cohasset's waste water.","DW type":"Surface Water",sewer_flag:"2",Data_flag:"0"},{muni_id:"67",muni_upper:"CONCORD",municipal:"Concord",mapc:"1","WW type":"Some Sewer (town center)","WW provider":"Other","DW type":"Public Water Supply",sewer_flag:"2",Data_flag:"1"},{muni_id:"71",muni_upper:"DANVERS",municipal:"Danvers",mapc:"1","WW type":"Sewered","WW provider":"Danvers Sewer Division","DW type":"Surface Water",sewer_flag:"1",Data_flag:"0"},{muni_id:"73",muni_upper:"DEDHAM",municipal:"Dedham",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"78",muni_upper:"DOVER",municipal:"Dover",mapc:"1","WW type":"Septic Systems","WW provider":"","DW type":"Some Public Water Supply",sewer_flag:"0",Data_flag:""},{muni_id:"82",muni_upper:"DUXBURY",municipal:"Duxbury",mapc:"1","WW type":"Some sewer (250 people served by Marshfield WWTP) + Septic systems","WW provider":"Marshfield WWTP?","DW type":"Groundwater",sewer_flag:"2",Data_flag:"0"},{muni_id:"92",muni_upper:"ESSEX",municipal:"Essex",mapc:"1","WW type":"Town sewer + septic tanks","WW provider":"South Essex Sewer District?","DW type":"Unknown",sewer_flag:"2",Data_flag:"0"},{muni_id:"93",muni_upper:"EVERETT",municipal:"Everett",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"99",muni_upper:"FOXBOROUGH",municipal:"Foxborough",mapc:"1","WW type":"Some Sewer","WW provider":"Other","DW type":"Public Water Supply",sewer_flag:"2",Data_flag:"1"},{muni_id:"100",muni_upper:"FRAMINGHAM",municipal:"Framingham",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"101",muni_upper:"FRANKLIN",municipal:"Franklin",mapc:"1","WW type":"Sewered","WW provider":"Local utility","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"107",muni_upper:"GLOUCESTER",municipal:"Gloucester",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Unknown",sewer_flag:"1",Data_flag:"1"},{muni_id:"119",muni_upper:"HAMILTON",municipal:"Hamilton",mapc:"1","WW type":"Septic tanks","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:"0"},{muni_id:"122",muni_upper:"HANOVER",municipal:"Hanover",mapc:"1","WW type":"Septic tanks?","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:""},{muni_id:"131",muni_upper:"HINGHAM",municipal:"Hingham",mapc:"1","WW type":"Some Sewer","WW provider":"Other","DW type":"Unknown",sewer_flag:"2",Data_flag:"1"},{muni_id:"133",muni_upper:"HOLBROOK",municipal:"Holbrook",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Some Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"136",muni_upper:"HOLLISTON",municipal:"Holliston",mapc:"1","WW type":"Sewer for municipal facilities; Septic for everyone else","WW provider":"","DW type":"Some Public Water Supply",sewer_flag:"0",Data_flag:"0"},{muni_id:"139",muni_upper:"HOPKINTON",municipal:"Hopkinton",mapc:"1","WW type":"Sewered/Some Sewer","WW provider":"Other","DW type":"Public Water Supply",sewer_flag:"2",Data_flag:"1"},{muni_id:"141",muni_upper:"HUDSON",municipal:"Hudson",mapc:"1","WW type":"Sewered (at least partially)","WW provider":"Local system","DW type":"Surface and Groundwater",sewer_flag:"1",Data_flag:"1"},{muni_id:"142",muni_upper:"HULL",municipal:"Hull",mapc:"1","WW type":"Sewered","WW provider":"Local Sewer System","DW type":"Surface Water",sewer_flag:"1",Data_flag:"0"},{muni_id:"144",muni_upper:"IPSWICH",municipal:"Ipswich",mapc:"1","WW type":"Sewered (2100 customers), potentially also some septic?","WW provider":"Local wastewater department","DW type":"Public Water Supply",sewer_flag:"2",Data_flag:"1"},{muni_id:"155",muni_upper:"LEXINGTON",municipal:"Lexington",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"157",muni_upper:"LINCOLN",municipal:"Lincoln",mapc:"1","WW type":"Septic systems","WW provider":"","DW type":"Surface and Groundwater",sewer_flag:"0",Data_flag:""},{muni_id:"158",muni_upper:"LITTLETON",municipal:"Littleton",mapc:"1","WW type":"Septic systems, some sewer in town center","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:"0"},{muni_id:"163",muni_upper:"LYNN",municipal:"Lynn",mapc:"1","WW type":"Sewered","WW provider":"Lynn regional WWTP","DW type":"Surface Water",sewer_flag:"1",Data_flag:"0"},{muni_id:"164",muni_upper:"LYNNFIELD",municipal:"Lynnfield",mapc:"1","WW type":"Mix of sewered and septic tanks","WW provider":"Local utility","DW type":"Unknown",sewer_flag:"2",Data_flag:"0"},{muni_id:"165",muni_upper:"MALDEN",municipal:"Malden",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"166",muni_upper:"MANCHESTER",municipal:"Manchester",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Unknown",sewer_flag:"1",Data_flag:"1"},{muni_id:"168",muni_upper:"MARBLEHEAD",municipal:"Marblehead",mapc:"1","WW type":"Sewered","WW provider":"South Essex Sewer District?","DW type":"Surface Water",sewer_flag:"1",Data_flag:"0"},{muni_id:"170",muni_upper:"MARLBOROUGH",municipal:"Marlborough",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"171",muni_upper:"MARSHFIELD",municipal:"Marshfield",mapc:"1","WW type":"Septic systems; some sewer systems","WW provider":"Local sewer system","DW type":"Unknown",sewer_flag:"2",Data_flag:"1"},{muni_id:"174",muni_upper:"MAYNARD",municipal:"Maynard",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Some Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"175",muni_upper:"MEDFIELD",municipal:"Medfield",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"176",muni_upper:"MEDFORD",municipal:"Medford",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"177",muni_upper:"MEDWAY",municipal:"Medway",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Some Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"178",muni_upper:"MELROSE",municipal:"Melrose",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"184",muni_upper:"MIDDLETON",municipal:"Middleton",mapc:"1","WW type":"Septic systems only","WW provider":"","DW type":"Surface Water",sewer_flag:"0",Data_flag:""},{muni_id:"185",muni_upper:"MILFORD",municipal:"Milford",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"187",muni_upper:"MILLIS",municipal:"Millis",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"189",muni_upper:"MILTON",municipal:"Milton",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"196",muni_upper:"NAHANT",municipal:"Nahant",mapc:"1","WW type":"Sewered","WW provider":"Lynn Regional WWTP","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"198",muni_upper:"NATICK",municipal:"Natick",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"199",muni_upper:"NEEDHAM",municipal:"Needham",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"207",muni_upper:"NEWTON",municipal:"Newton",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"208",muni_upper:"NORFOLK",municipal:"Norfolk",mapc:"1","WW type":"Sewer & small WWTP for denser sites (e.g. condos), septic systems elsewhere","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:"0"},{muni_id:"213",muni_upper:"NORTH READING",municipal:"North Reading",mapc:"1","WW type":"Septic systems + a few decentralized private sewers.","WW provider":"Regional utility","DW type":"Surface and Groundwater",sewer_flag:"0",Data_flag:"0"},{muni_id:"214",muni_upper:"NORTHAMPTON",municipal:"Northampton",mapc:"0","WW type":"","WW provider":"","DW type":"",sewer_flag:"",Data_flag:""},{muni_id:"219",muni_upper:"NORWELL",municipal:"Norwell",mapc:"1","WW type":"Septic systems only","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:""},{muni_id:"220",muni_upper:"NORWOOD",municipal:"Norwood",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"229",muni_upper:"PEABODY",municipal:"Peabody",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"231",muni_upper:"PEMBROKE",municipal:"Pembroke",mapc:"1","WW type":"Septic/Sewered mix. Small sewers only.","WW provider":"","DW type":"Unknown",sewer_flag:"0",Data_flag:"0"},{muni_id:"243",muni_upper:"QUINCY",municipal:"Quincy",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"244",muni_upper:"RANDOLPH",municipal:"Randolph",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Unknown",sewer_flag:"1",Data_flag:"1"},{muni_id:"246",muni_upper:"READING",municipal:"Reading",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Unknown",sewer_flag:"1",Data_flag:"1"},{muni_id:"248",muni_upper:"REVERE",municipal:"Revere",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"251",muni_upper:"ROCKLAND",municipal:"Rockland",mapc:"1","WW type":"Sewered","WW provider":"Local utility","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"0"},{muni_id:"252",muni_upper:"ROCKPORT",municipal:"Rockport",mapc:"1","WW type":"Sewered","WW provider":"Local utility?","DW type":"Unknown",sewer_flag:"1",Data_flag:"0"},{muni_id:"258",muni_upper:"SALEM",municipal:"Salem",mapc:"1","WW type":"Sewered","WW provider":"Other","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"262",muni_upper:"SAUGUS",municipal:"Saugus",mapc:"1","WW type":"Sewered?","WW provider":"Lynn Regional WWTP","DW type":"Surface Water",sewer_flag:"1",Data_flag:"0"},{muni_id:"264",muni_upper:"SCITUATE",municipal:"Scituate",mapc:"1","WW type":"Some Sewer","WW provider":"Other","DW type":"Unknown",sewer_flag:"1",Data_flag:"1"},{muni_id:"266",muni_upper:"SHARON",municipal:"Sharon",mapc:"1","WW type":"Some sewer??","WW provider":"Other","DW type":"Public Water Supply",sewer_flag:"2",Data_flag:"1"},{muni_id:"269",muni_upper:"SHERBORN",municipal:"Sherborn",mapc:"1","WW type":"Septic Systems","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:""},{muni_id:"274",muni_upper:"SOMERVILLE",municipal:"Somerville",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"277",muni_upper:"SOUTHBOROUGH",municipal:"Southborough",mapc:"1","WW type":'Septic Systems (even "downtown" has no sewer system)',"WW provider":"","DW type":"Some Surface Water",sewer_flag:"0",Data_flag:""},{muni_id:"284",muni_upper:"STONEHAM",municipal:"Stoneham",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"285",muni_upper:"STOUGHTON",municipal:"Stoughton",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"286",muni_upper:"STOW",municipal:"Stow",mapc:"1","WW type":"Septic systems only","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:""},{muni_id:"288",muni_upper:"SUDBURY",municipal:"Sudbury",mapc:"1","WW type":"Septic systems and decentralized wastewater treatment","WW provider":"Transitioned from all septic systems to ___ in 2011-2015","DW type":"Public Water Supply",sewer_flag:"0",Data_flag:"0"},{muni_id:"291",muni_upper:"SWAMPSCOTT",municipal:"Swampscott",mapc:"1","WW type":"Sewered","WW provider":"Lynn Regional WWTP","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"298",muni_upper:"TOPSFIELD",municipal:"Topsfield",mapc:"1","WW type":"Septic Systems only","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:""},{muni_id:"305",muni_upper:"WAKEFIELD",municipal:"Wakefield",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"307",muni_upper:"WALPOLE",municipal:"Walpole",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"308",muni_upper:"WALTHAM",municipal:"Waltham",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"314",muni_upper:"WATERTOWN",municipal:"Watertown",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"315",muni_upper:"WAYLAND",municipal:"Wayland",mapc:"1","WW type":"Town center is sewered, others are septic systems?","WW provider":"Local utility","DW type":"Public Water Supply",sewer_flag:"2",Data_flag:"0"},{muni_id:"317",muni_upper:"WELLESLEY",municipal:"Wellesley",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"320",muni_upper:"WENHAM",municipal:"Wenham",mapc:"1","WW type":"Some sewer","WW provider":"Other","DW type":"Unknown",sewer_flag:"2",Data_flag:"1"},{muni_id:"333",muni_upper:"WESTON",municipal:"Weston",mapc:"1","WW type":"Unsewered","WW provider":"Septic tanks","DW type":"Surface Water",sewer_flag:"0",Data_flag:""},{muni_id:"335",muni_upper:"WESTWOOD",municipal:"Westwood",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"336",muni_upper:"WEYMOUTH",municipal:"Weymouth",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Public Water Supply",sewer_flag:"1",Data_flag:"1"},{muni_id:"342",muni_upper:"WILMINGTON",municipal:"Wilmington",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Unknown",sewer_flag:"1",Data_flag:"1"},{muni_id:"344",muni_upper:"WINCHESTER",municipal:"Winchester",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"346",muni_upper:"WINTHROP",municipal:"Winthrop",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"347",muni_upper:"WOBURN",municipal:"Woburn",mapc:"1","WW type":"Sewered","WW provider":"MWRA","DW type":"Surface Water",sewer_flag:"1",Data_flag:"1"},{muni_id:"350",muni_upper:"WRENTHAM",municipal:"Wrentham",mapc:"1","WW type":"Septic Systems","WW provider":"","DW type":"Groundwater",sewer_flag:"0",Data_flag:""}],Map_stories={title:"Maps/Basemap",component:Map},sewerColors=["red","goldenrod","blue"],Default=function Template(args){return(0,jsx_runtime.jsx)(Map,(0,objectSpread2.Z)({},args))}.bind({});Default.args={container:"map",accessToken:"pk.eyJ1IjoiaWhpbGwiLCJhIjoiY2plZzUwMTRzMW45NjJxb2R2Z2thOWF1YiJ9.szIAeMS4c9YTgNsJeG36gg"};var MapWithNavigation=function NavTemplate(args){return(0,jsx_runtime.jsx)(Map,(0,objectSpread2.Z)((0,objectSpread2.Z)({},args),{},{children:(0,jsx_runtime.jsx)(NavigationControl,{})}))}.bind({});MapWithNavigation.args={container:"map",accessToken:"pk.eyJ1IjoiaWhpbGwiLCJhIjoiY2plZzUwMTRzMW45NjJxb2R2Z2thOWF1YiJ9.szIAeMS4c9YTgNsJeG36gg"};var MAPCLayer=function MAPCTemplate(args){var _useState=(0,react.useState)(""),_useState2=(0,slicedToArray.Z)(_useState,2),muni=_useState2[0],setMuni=_useState2[1];return console.log(muni),(0,jsx_runtime.jsxs)(Map,(0,objectSpread2.Z)((0,objectSpread2.Z)({},args),{},{onClick:function onClick(e){var clickedMuni=e.features.find((function(node){return"MAPC Munis"===node.layer.id}));setMuni(clickedMuni.properties.municipal||"")},children:[(0,jsx_runtime.jsx)(MunicipalitiesMAPC,{type:"fill",layerId:"MAPC Munis",paint:{"fill-outline-color":"white"},data:data,matchOn:"municipal",mapColumn:"sewer_flag",colorScale:sewerColors,choroplethFunc:function choroplethFunc(colorScale,value){return 0==+value?colorScale[0]:1==+value?colorScale[1]:colorScale[2]}}),(0,jsx_runtime.jsx)(Source,{sourceId:"Sewer lines",url:"ihill.5wqorrqo",children:(0,jsx_runtime.jsx)(Layer,{layerId:"Sewer line layer",type:"line",sourceLayer:"MAPCSewerLines2013-9tfyjn"})}),(0,jsx_runtime.jsx)(Tooltip,{onLayer:"MAPC Munis",children:(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("p",{children:"Hello world"}),(0,jsx_runtime.jsx)("p",{children:muni})]})}),(0,jsx_runtime.jsx)(MapLegend,{colorScale:sewerColors,title:"Sewer Systems",legendEntries:["No centralized sewer system(s)","Fully sewered, or nearly so","Partially sewered"]})]}))}.bind({});MAPCLayer.args={container:"map",accessToken:"pk.eyJ1IjoiaWhpbGwiLCJhIjoiY2plZzUwMTRzMW45NjJxb2R2Z2thOWF1YiJ9.szIAeMS4c9YTgNsJeG36gg"},Default.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Default.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:"args => <Map {...args} />"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})}),MapWithNavigation.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},MapWithNavigation.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_MapWithNavigation$pa=MapWithNavigation.parameters)||void 0===_MapWithNavigation$pa?void 0:_MapWithNavigation$pa.docs),{},{source:(0,objectSpread2.Z)({originalSource:"args => <Map {...args}>\n    <NavigationControl />\n  </Map>"},null===(_MapWithNavigation$pa2=MapWithNavigation.parameters)||void 0===_MapWithNavigation$pa2||null===(_MapWithNavigation$pa3=_MapWithNavigation$pa2.docs)||void 0===_MapWithNavigation$pa3?void 0:_MapWithNavigation$pa3.source)})}),MAPCLayer.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},MAPCLayer.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_MAPCLayer$parameters=MAPCLayer.parameters)||void 0===_MAPCLayer$parameters?void 0:_MAPCLayer$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:'args => {\n  const [muni, setMuni] = useState(\'\');\n  const onClick = e => {\n    const clickedMuni = e.features.find(node => node.layer.id === \'MAPC Munis\');\n    setMuni(clickedMuni.properties.municipal || \'\');\n  };\n  console.log(muni);\n  return <Map {...args} onClick={onClick}>\n      <MunicipalitiesMAPC type="fill" layerId="MAPC Munis" paint={{\n      \'fill-outline-color\': \'white\'\n    }} data={data} matchOn="municipal" mapColumn="sewer_flag" colorScale={sewerColors} choroplethFunc={(colorScale: Array<string>, value: number | string) => {\n      if (+value === 0) {\n        return colorScale[0];\n      }\n      if (+value === 1) {\n        return colorScale[1];\n      }\n      return colorScale[2];\n    }} />\n      <Source sourceId="Sewer lines" url="ihill.5wqorrqo">\n        <Layer layerId="Sewer line layer" type="line" sourceLayer="MAPCSewerLines2013-9tfyjn" />\n      </Source>\n      <Tooltip onLayer="MAPC Munis">\n        <React.Fragment>\n          <p>Hello world</p>\n          <p>{muni}</p>\n        </React.Fragment>\n      </Tooltip>\n      <MapLegend colorScale={sewerColors} title="Sewer Systems" legendEntries={[\'No centralized sewer system(s)\', \'Fully sewered, or nearly so\', \'Partially sewered\']} />\n    </Map>;\n}'},null===(_MAPCLayer$parameters2=MAPCLayer.parameters)||void 0===_MAPCLayer$parameters2||null===(_MAPCLayer$parameters3=_MAPCLayer$parameters2.docs)||void 0===_MAPCLayer$parameters3?void 0:_MAPCLayer$parameters3.source)})});var __namedExportsOrder=["Default","MapWithNavigation","MAPCLayer"]}}]);